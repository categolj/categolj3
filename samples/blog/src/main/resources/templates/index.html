<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <meta charset="UTF-8"/>
    <title>CategoLJ3 Blog</title>
</head>
<body>
<div layout:fragment="content">
    <h2 th:if="${param.q != null}" th:inline="text">Search for [[${param.q[0]}]]...</h2>
    <div>
        <article class="article panel panel-box" th:each="entry : ${page.content}">
            <h3 class="article-title">
                <a th:href="@{'/entries/' + ${entry.entryId}}" class="entry-title"
                   th:text="${entry.frontMatter.title}">Hello</a></h3>

            <p class="article-meta" th:inline="text">updated at [[${entry.updated.date}]] by
                <a th:href="@{'/users/' + ${entry.updated.name} + '/entries?updated'}"
                   th:text="${entry.updated.name}"></a>
                created at [[${entry.created.date}]] by
                <a th:href="@{'/users/' + ${entry.created.name} + '/entries'}"
                   th:text="${entry.created.name}"></a><br/>
                category: <span th:utext="${@categoriesRenderer.render(entry.frontMatter.categories)}"></span><br/>
                tags: <span th:utext="${@tagRenderer.render(entry.frontMatter.tags)}"></span>
            </p>

            <p>
                <a th:href="${@gitProperties.uri.replace('.git', '') + '/edit/master/content/' + #numbers.formatInteger(entry.entryId, 5, 'NONE') + '.md'}">Edit</a>
                <a th:href="${@gitProperties.uri.replace('.git', '') + '/commits/master/content/' + #numbers.formatInteger(entry.entryId, 5, 'NONE') + '.md'}">History</a>
            </p>

            <p>
                <button th:onclick="'javascript:loadContent(this, ' + ${entry.entryId} + ');'">Read this article
                </button>
            </p>
        </article>
    </div>
    <div>
        <ul class="pagination" th:utext="${@paginationRenderer.render(page)}">
        </ul>
    </div>
    <script th:src="@{/highlight/highlight.pack.js}"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script th:src="@{/superagent.js}"></script>
    <script th:src="@{/app.js}"></script>
</div>
</body>
</html>